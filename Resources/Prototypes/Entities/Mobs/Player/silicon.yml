- type: entity
  save: false
  abstract: true
  id: PlayerSiliconBase #for player controlled silicons
  components:
  - type: Reactive
    groups:
      Acidic: [Touch]
  - type: Input
    context: "human"
  - type: DamageOnHighSpeedImpact
    damage:
      types:
        Blunt: 5
    soundHit:
      path: /Audio/Effects/hit_kick.ogg
  - type: Clickable
  - type: Damageable
    damageContainer: Inorganic
  - type: Bloodstream
    bloodReagent: Oil
    bloodlossDamage:
      types:
        Bloodloss:
          1
    bloodlossHealDamage:
      types:
        Bloodloss:
          -0.25
  - type: InteractionOutline
  - type: Fixtures
    fixtures:
    - shape:
        # Circles, cuz rotation of rectangles looks very bad
        !type:PhysShapeCircle
        radius: 0.35
      density: 50
      mask:
      - MobMask
      layer:
      - MobLayer
  - type: MovementSpeedModifier
    baseWalkSpeed : 4
    baseSprintSpeed : 3
  - type: Sprite
    noRot: true
    drawdepth: Mobs
    netsync: false
  - type: Physics
    bodyType: KinematicController
  - type: Hands
    showInHands: false
  - type: Body
    prototype: Drone
  - type: DoAfter
  - type: Pullable
  - type: Examiner
  - type: Puller
  - type: Recyclable
    safe: false
  - type: StandingState
  - type: Alerts
  - type: Tag
    tags:
      - ShoesRequiredStepTriggerImmune

- type: entity
  name: drone
  id: Drone
  parent: PlayerSiliconBase
  components:
  - type: Drone
    interactionBlockRange : 0.01
  - type: InnateTool
    tools:
      - id: ClothingBackpackSatchelDrone
      - id: trayScanner
      - id: Omnitool
      - id: WelderExperimental
  - type: NameIdentifier
    group: Drone
  - type: Inventory
    templateId: drone
  - type: Strippable
  - type: UserInterface
    interfaces:
    - key: enum.StrippingUiKey.Key
      type: StrippableBoundUserInterface
  #- type: GhostTakeoverAvailable
  #  makeSentient: true
  #  name: Maintenance Drone
  #  description: Maintain the station. Ignore other beings except drones.
  #  rules: |
  #   You are bound by these laws both in-game and out-of-character:
  #   1. You may not involve yourself in the matters of another being, even if such matters conflict with Law Two or Law Three, unless the other being is another Drone.
  #   2. You may not harm any being, regardless of intent or circumstance.
  #   3. Your goals are to build, maintain, repair, improve, and power to the best of your abilities, You must never actively work against these goals.
  - type: MovementSpeedModifier
    baseWalkSpeed : 5
    baseSprintSpeed : 5
  - type: MobState
    allowedStates:
      - Alive
      - Dead
  - type: MobThresholds
    thresholds:
      0: Alive
      60: Dead
  - type: Flashable
  - type: NoSlip
  - type: StatusEffects
    allowed:
    - Stun
    - KnockedDown
    - SlowedDown
  - type: SlowOnDamage
    speedModifierThresholds:
      30: 0.7
      50: 0.5
  - type: Temperature
    heatDamageThreshold: 5000
    currentTemperature: 310.15
    specificHeat: 42
    heatDamage:
      types:
        Heat : 1 #per second, scales with temperature & other constants
  - type: Sprite
    drawdepth: SmallMobs
    netsync: false
    layers:
    - state: shell
      sprite: Mobs/Silicon/drone.rsi
  - type: MovementIgnoreGravity
  - type: Fixtures
    fixtures:
    - shape:
        !type:PhysShapeCircle
        radius: 0.35
      density: 50
      mask:
      - SmallMobMask
      layer:
      - SmallMobLayer
  - type: Appearance
    visuals:
      - type: GenericEnumVisualizer
        key: enum.DroneVisuals.Status
        layer: 0
        states:
          enum.DroneStatus.Off: shell
          enum.DroneStatus.On: drone
  - type: ReplacementAccent
    accent: silicon
  - type: Repairable
    fuelcost: 15
    doAfterDelay: 8
  - type: Actions
  - type: UnpoweredFlashlight
    toggleAction:
      name: action-name-toggle-light
      description: action-description-toggle-light
      icon: { sprite: Objects/Tools/flashlight.rsi, state: flashlight }
      iconOn: Objects/Tools/flashlight.rsi/flashlight-on.png
      event: !type:ToggleActionEvent
  - type: PointLight
    enabled: false
    radius: 3.5
    softness: 1
    mask: /Textures/Effects/LightMasks/cone.png
    autoRot: true
  - type: Tag
    tags:
      - ShoesRequiredStepTriggerImmune
      - CannotSuicide

- type: entity
  name: Assault Syndicate Borg
  id: Syndieborg
  description: The Syndicate's assault Borg, armed to the teeth and ready to bring losses to the NT.
  parent: BaseSyndieborg
  components:
  - type: MobState
    allowedStates:
    - Alive
    - Dead
  - type: MobThresholds
    thresholds:
      0: Alive
      750: Dead
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 750
      behaviors:
      - !type:DoActsBehavior
        acts: ["Destruction"]
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/Effects/metalbreak.ogg
      - !type:ExplodeBehavior
      - !type:SpawnEntitiesBehavior
        spawn:
          Syndieborgdestroyed:
            min: 1
            max: 1
  - type: InnateTool
    tools:
      - id: WeaponBorgLightMachineGunL6
      - id: WeaponLauncherMultipleRocket
      - id: EnergySword
      - id: SyndicateJawsOfLife
      - id: Emag
      - id: Pinpointer
  - type: Faction
    factions:
    - Syndicate
  - type: IntrinsicRadioReceiver
  - type: ActiveRadio
    channels:
    - Syndicate
  - type: IntrinsicRadioTransmitter
    channels:
    - Syndicate
  - type: GhostTakeoverAvailable
    makeSentient: true
    name: Штурмовой Борг Синдиката
    description: Штурмовой борг, заказанный ядерными оперативниками. Вы антагонист.
    rules: 1. Борг не может причинить вред агенту синдиката или своим бездействием допустить, чтобы агенту синдиката был причинён вред. 2. Борг должен повиноваться всем приказам, которые даёт агент синдиката, кроме тех случаев, когда эти приказы противоречат Первому Закону. 3. Борг должен заботиться о своей безопасности в той мере, в которой это не противоречит Первому или Второму Законам.

- type: entity
  noSpawn: true
  id: Syndieborgdestroyed
  parent: PlayerSiliconBase
  name: Destroyed Assault Syndicate Borg
  description: The positron brain is squashed.
  components:
  - type: Sprite
    sprite: Objects/Specific/Borgs/syndieborg.rsi
    state: syndieborg-broken
    netsync: false
  - type: Physics
    bodyType: KinematicController
  - type: Fixtures
    fixtures:
    - shape:
        !type:PhysShapeCircle
        radius: 0.45
      density: 1000
      mask:
      - MobMask
      layer:
      - MobLayer
  - type: MobState
    allowedStates:
    - Alive
    - Dead
  - type: MobThresholds
    thresholds:
      0: Alive
      500: Dead
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 500
      behaviors:
      - !type:DoActsBehavior
        acts: ["Destruction"]
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/Effects/metalbreak.ogg
      - !type:ExplodeBehavior
      - !type:SpawnEntitiesBehavior
        spawn:
          SheetPlasteel1:
            min: 3
            max: 10

- type: entity
  noSpawn: true
  name: Assault Syndicate Borg
  id: BaseSyndieborg
  parent: PlayerSiliconBase
  components:
  - type: IntrinsicRadioReceiver
  - type: NameIdentifier
    group: Drone
  - type: Fixtures
    fixtures:
    - shape:
        !type:PhysShapeCircle
        radius: 0.40
      density: 1000
      mask:
      - MobMask
      layer:
      - MobLayer
  - type: Physics
    bodyType: KinematicController
  - type: Body
    prototype: SiliconBase
  - type: MeleeWeapon
    hidden: true
    attackRate: 0.75
    damage:
      types:
        Blunt: 25 #thwack
        Structural: 20
  - type: TypingIndicator
    proto: robot
  - type: Actions
  - type: MobMover
  - type: InputMover
  - type: UnpoweredFlashlight
    toggleAction:
      name: action-name-toggle-light
      description: action-description-toggle-light
      icon: { sprite: Objects/Tools/flashlight.rsi, state: flashlight }
      iconOn: Objects/Tools/flashlight.rsi/flashlight-on.png
      event: !type:ToggleActionEvent
  - type: PointLight
    color: red
    enabled: false
    radius: 8
    softness: 1
    mask: /Textures/Effects/LightMasks/cone.png
    autoRot: true
  - type: MovementIgnoreGravity
  - type: Puller
    needsHands: false
  - type: UserInterface
    interfaces:
    - key: enum.StrippingUiKey.Key
      type: StrippableBoundUserInterface
  - type: MovementSpeedModifier
    baseWalkSpeed : 2
    baseSprintSpeed : 2.5
  - type: Repairable
    fuelcost: 100
    doAfterDelay: 60
  - type: MobState
    allowedStates:
    - Alive
    - Dead
  - type: MobThresholds
    thresholds:
      0: Alive
      750: Dead
  - type: Sprite
    drawdepth: Mobs
    netsync: false
    layers:
    - state: syndieborg
      sprite: Objects/Specific/Borgs/syndieborg.rsi
  - type: Appearance
  - type: CombatMode
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 750
      behaviors:
      - !type:DoActsBehavior
        acts: ["Destruction"]
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/Effects/metalbreak.ogg
      - !type:ExplodeBehavior
      - !type:SpawnEntitiesBehavior
        spawn:
          Syndieborgdestroyed:
            min: 1
            max: 1

- type: entity
  name: onestar mecha
  id: Onestar
  parent: PlayerSiliconBase
  components:
  - type: InnateTool
    tools:
      - id: WeaponMinigun
      - id: EnergySword
      - id: WeaponLauncherMultipleRocket
      - id: WeaponXrayCannon
  - type: UserInterface
    interfaces:
    - key: enum.StrippingUiKey.Key
      type: StrippableBoundUserInterface
  - type: GhostTakeoverAvailable
    makeSentient: true
    name: Onestar Mecha
    description: You are an experimental mecha created by who-knows-what, all you know is that you have weapons and you detect fleshy moving targets nearby...
    rules: Use your weapons to cause havoc. You are an antagonist.
  - type: MovementSpeedModifier
    baseWalkSpeed : 3
    baseSprintSpeed : 2
  - type: MobState
    allowedStates:
      - Alive
      - Dead
  - type: MobThresholds
    thresholds:
      0: Alive
      1000: Dead
  - type: Sprite
    drawdepth: Mobs
    netsync: false
    layers:
    - state: onestar_boss
      sprite: Mobs/Silicon/onestar.rsi
    - state: onestar_boss_screen
      sprite: Mobs/Silicon/onestar.rsi
      shader: unshaded
  - type: MovementIgnoreGravity
  - type: Fixtures
    fixtures:
    - shape:
        !type:PhysShapeCircle
        radius: 1
      density: 160
      mask:
      - LargeMobMask
      layer:
      - LargeMobLayer
  - type: Appearance
    rotate: true
    states:
      Alive:
        Base: onestar_boss
      Dead:
        Base: onestar_boss_wrecked
  - type: CombatMode
